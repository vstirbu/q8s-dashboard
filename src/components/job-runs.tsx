"use client";

/**
 * This code was generated by v0 by Vercel.
 * @see https://v0.dev/t/qGmgdpvuukB
 * Documentation: https://v0.dev/docs#integrating-generated-code-into-your-nextjs-app
 */

/** Add fonts into your Next.js project:

import { Inter } from 'next/font/google'

inter({
  subsets: ['latin'],
  display: 'swap',
})

To read more about using these font, please visit the Next.js documentation:
- App Directory: https://nextjs.org/docs/app/building-your-application/optimizing/fonts
- Pages Directory: https://nextjs.org/docs/pages/building-your-application/optimizing/fonts
**/
import {
  CardTitle,
  CardDescription,
  CardHeader,
  CardContent,
  Card,
} from "@/components/ui/card";
import { ResponsiveLine } from "@nivo/line";

export function JobRuns(props: {
  transformed: Array<{ x: string; y: number }>;
}) {
  return (
    <Card className="h-full w-full">
      <CardHeader>
        <CardTitle>Jobs activity</CardTitle>
        <CardDescription>
          Your jobs executed over the past 7 days
        </CardDescription>
      </CardHeader>
      <CardContent>
        <LineChart className="aspect-[9/4]" data={props.transformed} />
      </CardContent>
    </Card>
  );
}

function LineChart(
  props: React.ComponentProps<"div"> & { data: { x: string; y: number }[] }
) {
  return (
    <div {...props}>
      <ResponsiveLine
        data={[
          {
            id: "jobs",
            data: props.data,
          },
        ]}
        margin={{ top: 10, right: 20, bottom: 40, left: 40 }}
        xScale={{
          type: "point",
        }}
        yScale={{
          type: "linear",
        }}
        axisTop={null}
        axisRight={null}
        axisBottom={{
          tickSize: 0,
          tickPadding: 16,
        }}
        axisLeft={{
          tickSize: 0,
          tickValues: 5,
          tickPadding: 16,
        }}
        enableArea={true}
        enableGridX={false}
        tooltip={({ point }) => {
          return (
            <div className="bg-gray-100 p-4 rounded-sm dark:bg-gray-500 shadow-sm">
              <div className="text-sm text-gray-500 dark:text-gray-300">
                {point.data.xFormatted}
              </div>
              <div className="text-md font-semibold dark:text-gray-200">
                {point.data.yFormatted} jobs
              </div>
            </div>
          );
        }}
        colors={["#2563eb", "#e11d48"]}
        pointSize={6}
        useMesh={true}
        gridYValues={6}
        theme={{
          tooltip: {
            chip: {
              borderRadius: "9999px",
            },
            container: {
              fontSize: "12px",
              textTransform: "capitalize",
              borderRadius: "6px",
            },
          },
          grid: {
            line: {
              stroke: "#666666",
              // strokeDasharray: "4 4",
              strokeWidth: 0.5,
            },
          },
        }}
        role="application"
      />
    </div>
  );
}
